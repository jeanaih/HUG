* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
  user-select: none;
  -webkit-user-select: none;
}

p,
h1,
h2,
h3,
h4 {
  display: inline-block;
  margin-block-start: 0em;
  margin-block-end: 0em;
  margin-inline-start: 0px;
  margin-inline-end: 0px;
  padding-inline-start: 0px;
}

body {
  background-color: #9edae9;
  font-family: Arial, Helvetica, sans-serif;
  overscroll-behavior: contain;
}

.wrapper {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.bunny-radar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: none;
}

.circle {
  position: relative;
  border-radius: 50%;
  z-index: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

.bunny-pos {
  position: absolute;
  width: var(--size);
  height: var(--size);
  border-radius: 50%;
  display: flex;
  justify-content: center;
}

.bunny-pos::after {
  position: absolute;
  content: '';
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAADhJREFUKFNjtFlz4j8DEYARpIYYxWCFxCiGKySkGEUhPsUYCnEpxqoQm2KcCtEV41WIrJigQphiAH0JGuGElBe4AAAAAElFTkSuQmCC);
  width: 20px;
  height: 20px;
  background-size: 20px;
  background-repeat: no-repeat;
  image-rendering: pixelated;
  bottom: -24px;
  transform: rotate(135deg);
}

.bunny-indicator {
  position: absolute;
  bottom: 0;
  color: #3cacc8;
  font-size: 0.8rem;
}

.end-message {
  position: fixed;
  z-index: 100001;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  box-shadow:
    0 0 0 4px #e6f9e0,
    0 0 0 8px #b7e3b0,
    inset 0 0 0 2px #e6f9e0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 24px;
  animation: float 3s ease-in-out infinite;
  pointer-events: all;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  padding: 32px 24px;
}

.end-message p {
  background: none;
  border: none;
  box-shadow: none;
  color: #57280f;
  font-size: clamp(13px, 2.5vw, 18px);
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  margin: 0;
  text-align: center;
  padding: 0;
  width: auto;
  max-width: 90vw;
  text-shadow: 1px 1px 0 #fff;
}

.end-message .end-actions {
  display: flex;
  flex-direction: row;
  gap: 18px;
  align-items: center;
  margin-top: 0;
  justify-content: center;
}

.end-message .end-icon {
  width: 48px;
  height: 48px;
  margin-bottom: 10px;
  image-rendering: pixelated;
  display: block;
}

.end-message .play-again-btn,
.end-message .change-mode-btn,
.end-message .share-btn {
  font-size: 0;
  min-width: 0;
  min-height: 0;
  padding: 0;
  width: 48px;
  height: 48px;
  border-radius: 8px;
  text-align: center;
  text-indent: -9999px;
  overflow: hidden;
}

.end-message .play-again-btn span,
.end-message .change-mode-btn span,
.end-message .share-btn span {
  display: flex;
  align-items: center;
  justify-content: center;
}

.end-message button {
  font-family: 'Press Start 2P', cursive;
  font-size: clamp(12px, 2vw, 16px);
  background: #e2deec;
  color: #57280f;
  border: 4px solid #b7e3b0;
  border-radius: 0;
  padding: 12px 32px 12px 44px;
  min-width: 160px;
  cursor: pointer;
  position: relative;
  transition: background 0.2s, color 0.2s, transform 0.1s;
  margin: 0;
  outline: none;
  box-shadow: 0 2px 8px #b7e3b0;
  text-align: left;
}

.end-message button .play-icon {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  width: 22px;
  height: 22px;
  display: inline-block;
  vertical-align: middle;
}

.end-message button:hover {
  background: #b7e3b0;
  color: #4d220a;
  transform: translateY(-2px) scale(1.04);
}

.end-message button:active {
  background: #c2d0c0;
  color: #6b6a67;
  transform: translateY(2px) scale(0.98);
}

.end-message .change-mode-btn {
  background: #f3f9f2;
  color: #9ab49a;
  border: 4px solid #e2deec;
  margin-top: 0;
  padding: 10px 24px;
  font-size: clamp(11px, 2vw, 15px);
  min-width: 160px;
  text-align: center;
  position: relative;
}

.end-message .change-mode-btn:hover {
  background: #e2deec;
  color: #57280f;
  border-color: #b7e3b0;
}

.end-message .change-mode-btn:active {
  background: #c2d0c0;
  color: #6b6a67;
}

button {
  font-family: Arial, Helvetica, sans-serif;
  border: 0;
  padding: 10px 20px;
  color: #4d220a;
  background-color: #c3ac83;
  cursor: pointer;
}

button:hover {
  background-color: #fff;
}

.share-btn {
  background: #0084ff;
  border: 4px solid #b7e3b0;
  border-radius: 50%;
  width: 48px;
  height: 48px;
  min-width: 48px;
  min-height: 48px;
  max-width: 48px;
  max-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow:
    0 0 0 4px #fff7fa,
    0 2px 8px #b7e3b0;
  transition: background 0.2s, transform 0.1s;
  padding: 0;
  margin: 0;
  outline: none;
  position: relative;
  color: #fff;
}

.share-btn:hover {
  background: #005ecb;
  transform: translateY(-2px) scale(1.04);
}

.share-btn:active {
  background: #003e85;
  transform: translateY(2px) scale(0.98);
}

.share-btn .share-icon {
  width: 28px;
  height: 28px;
  display: block;
  color: #fff;
}

.share-btn.copied {
  background: #36a36a !important;
  border-color: #b7e3b0 !important;
}

.share-btn.copied .share-icon svg {
  stroke: #fff !important;
}

.icon-btn {
  background: #e2deec;
  border: 4px solid #b7e3b0;
  border-radius: 8px;
  width: 48px;
  height: 48px;
  min-width: 48px;
  min-height: 48px;
  max-width: 48px;
  max-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow:
    0 0 0 4px #fff7fa,
    0 2px 8px #b7e3b0;
  transition: background 0.2s, transform 0.1s;
  padding: 0;
  margin: 0;
  outline: none;
  position: relative;
}

.icon-btn:hover {
  background: #b7e3b0;
  transform: translateY(-2px) scale(1.04);
}

.icon-btn:active {
  background: #c2d0c0;
  transform: translateY(2px) scale(0.98);
}

.icon-btn svg {
  width: 28px;
  height: 28px;
  display: block;
}

.burger-btn {
  background: #e2deec;
  border: 4px solid #b7e3b0;
  border-radius: 8px;
  width: 48px;
  height: 48px;
  min-width: 48px;
  min-height: 48px;
  max-width: 48px;
  max-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow:
    0 0 0 4px #fff7fa,
    0 2px 8px #b7e3b0;
  transition: background 0.2s, transform 0.1s;
  padding: 0;
  margin: 0;
  outline: none;
  position: relative;
}

.burger-btn:hover {
  background: #b7e3b0;
  transform: translateY(-2px) scale(1.04);
}

.burger-btn:active {
  background: #c2d0c0;
  transform: translateY(2px) scale(0.98);
}

.burger-btn .burger-icon {
  width: 28px;
  height: 28px;
  display: block;
}

@keyframes fade-in {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

.d-none {
  display: none;
}

.bunny {
  pointer-events: none;
}

.bunny::after {
  background-image: url(data:image/png;base64,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);
}

.sad .bunny::after {
  background-image: url(data:image/png;base64,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);
}

.happy-right .bunny::after,
.happy-left .bunny::after {
  background-position: 0;
  background-size: calc(var(--w) * var(--m)) calc(var(--h) * var(--m));
}

.happy-right::before,
.happy-left::before {
  position: absolute;
  top: -50px;
  left: calc(var(--m) * -0.5 * var(--h));
  width: calc(var(--m) * var(--h));
  content: attr(message);
  font-size: 0.8em;
  text-align: center;
  color: #57280f;
  animation: display forwards 0.8s;
}

@keyframes display {
  0% {
    transform: translateY(0);
  }

  90% {
    transform: translateY(-30px);
    opacity: 1;
  }

  100% {
    transform: translateY(-30px);
    opacity: 0;
  }
}

.happy-right .bunny::after {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAAAXNSR0IArs4c6QAAAP5JREFUSEvdljESAiEMRaWz02PoabbUI2q5p9FjrJ0dTpjJTghsvhDGQhpmYfMIyScQdoNb6OFdTodIdvfnq7CvAi0Dmrs9luTH9XwsoAXQMpBzvDMNzYDIAM3TIn8A5OBTz8mQymiOIZLV74C1DCLvatJJWfbANNQNpBhysgI15KE00CHgOe4hUBugmEKgBrznORvaT1P2vQJpNMaYShJqDNUw1uN6lj2ZluKGxQF5vHlShnvoAcrqDXX4zZZJ2FlSPN5JrdKlVXhonYyat/S/vAGHAOV1mulwqypbcewusLVQNN/Lutbp5LmBXOp4oeaniGW4Fdeux5KVpOHADwr6DjBMkjHBAAAAAElFTkSuQmCC);
}

.happy-left .bunny::after {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAAAXNSR0IArs4c6QAAAQNJREFUSEvdlj0OwjAMhcnGBseA03SEI8LY08AxYGMLctCr7NSxEyUw0KVS03x+/k3CZvATNN7psIv0/Xp/quuWhtUGgl1uj7TnfNyrUMugAHIYVORQz2ATsMbgHwCRHHojWTzLeYxdl70y/R1Qy6CnTiut5HIPLIcmYIwxtRrFQwt8jVLEcgECZkG9Nep9odBS4hlcKeSw1zwL9naaXK8FUEsKoDUwshbCx9ulsHsyzYv7e50yVGEPLJ/solOGFTYUDgOin0szr1SEXICoQ2xojeVwIJ/mOMPNc5mPptIUMie2NhuxoeYIFa3HA4+bAb+OdAFLWeWGuDH+f/NlyJtjw4FvuiQXMCR6vxcAAAAASUVORK5CYII=);
}

.hug-bunny-bear .bunny,
.hug-bear-bunny .bunny {
  --w: 32px;
  top: -42px;
}

.hug-bunny-bear .bunny::after,
.hug-bear-bunny .bunny::after {
  background-position: 0;
  background-size: calc(var(--w) * var(--m));
  image-rendering: pixelated;
}

.hug-bear-bunny .bunny::after {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAZdJREFUWEfFl8FNBDEMRScHzuyBIqABWgEhrWgARDHQAJygFCqAHrhAAYjVX+kjj9eOE2dGO5edTTLxG9vfzpTpyFc5sv1pGODq/PQPL/H2+TPbyxvXLzwEACOvH9/7Pa8vNv8Q3rjl7TSANCI3BgihOC7hFvPAqgCMH2l1fDku18lQDHkAmz49P848dXd7byaZXIc1MDwcAgsANDAgLwtyVYCoXizmARjyvOBB0HgN0lOCKcNeAIZIJ58GsiAOADLGaSjyRAoAmzLh5L00innOnV1uZ0qQqkgBSAXozNcQ+A8Almb8yrCkAWQsI48QwErIRQAijwwDZGSIZ35PNtPDzfagEUUNye2GkRp0ZdTx1h3S6yfVdvz1/rI/bLRengxLKa6dtAd6qmLqPBCFQEqQ914l7AZoMc4ciMpvKglbAGTRsWp+SxHCmqFmZCnBU8Pq3bBWgFiaLSl2q8BrSN5pqGbcDYFXDXk21DlSOw2lASyIDEBNglUP1AA4x+xHbHlE7zmShwCWoagst35TcJ/0p1kE0jq/A+eTbjBgLTdgAAAAAElFTkSuQmCC);
  animation: hug-bear-bunny forwards 1.8s;
}

@keyframes hug-bear-bunny {

  0%,
  4%,
  95%,
  100% {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqJJREFUeF7tWstNRDEM3HfgDAeKgAZoBYSEaABEMdAAnKAUKoAeuEABCMTuM2IHecd2kvdL9rS7+byX8dgeJ+lWlX+6yte/mhwAp0f7X3+N8vT6UfQdi04eYVe1AMjCH1/et3A7Oz5Y/2ZMiAI3GQZUC4C2cHQfjQmpwI3OgAZAH/XR9xkDUoGT+WfLgAZAkDnIrMYARATzKbazfGydT+aJUjk6jjKgWgBk4Xf3tzsV7NXltUuZafPJPPIwlgWkn+gBb3+Nub8xoAHQR1XGALEEWhBpw+aR8VZLRgqrnzGslnAzoAEQNQWMmz0DUnGYHACyIGswjAIw1MJZLaHWAg0AZzaYOxP+1QKlGYBZpHQaZK4QToNRy+O4oWMC6oIGgDX6i6VQ4Wn/a5aW8TgOmWDV/Fo/9r/UBmYGVA+AJoGZ5mdMkPbDk4v1V6vlteDGqsvkGIBFUHUAaNE/1UWEAZpltRMjbxpNZkADgAiAqItoDMCdIObjTJ8UY0BqkBwdAKseYAhb2z/3Nqe+N+eb6O/1ZetzkEG4NzhaLTBZAIZiwlA1gHlPEClVuiqcPAACyNvzw9adHa/vsf4s+LHxrL3rup3Hf/RssFoA0AVSlZ5mqSgDWLUnWSVbDGgA9GeC7KzPWxx5GcCqRWwvzgBUgLMHgKW/3K6QiwFWZiQrwQaAEguse4PoMt4awBr9tX2FyTAgqgRHByC17E1lQHR/QMsG4WowuvGxGACYBmftURdg82rt2RkQfZFcDPA+3wxAdD9gqCyQa+Eyj1oNMkGEL1ItAHhvkAGn9Wd6gCk9r+9nY4BiAbDGgtIAYPDKdUeYMqAB0CPg9WkEDn1Tu7OrXdLG/pNnwOIAiC7Im6+9/XNd66e7wg0Ar2lm1t/MgJmty/y63yKelm4lf6/tAAAAAElFTkSuQmCC);
  }

  5%,
  9%,
  90%,
  94% {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAo5JREFUeF7tW0FOwzAQbA6c4cAj4AP9CggJ8QEQj6EfgBM8hRfAH7jAAxCINiu1I7az6ziO3WxviR3HOzs7u3bcbjHzXzdz+xcBQDBgYgQuzo5/tqfw8v61l5Xe/sy8yUPAa5C3f7UAiCHPb587c7w8P1lfIxO8/Znh0j4ZA7wGeftXC4BmiDZhYQQyBftrzGFAFGdAANCrPvOoeC4Y0IsiA2z0EMD0g7HF8jf218bTskIAAOmymAiKp1aPD3sF9fbm7t/8rXleG0/GEY9PrgEBQK/ajAHiafGgRhc2TrMMCABYyWVsb54BRjvVbtUBIDO1imEqAGh46jjegsi8FggAnNkg1YOlmVANAzCLsNKXAWwNBQrA2NTXDBnKhABA2VpDwAczQDyFFZ52HyeA/fD6dHm9fkRbE7D7bJUaADAxsWoArgFYzc+YIO3CANwhkmtNLItrwOwBYGqeqhHIAMZYZMroGsAmNFQkmwdAWyZbNSIA6NMgYxq2ZxPBUqtBec/30ebb4P3VJv97S2Kr4fI+WgcEAMAta13AsgKj9NiedzMgFxPYpikrcDTgvNRPBkAe/Hh92jnZwTzqbfeuBruuM4fz9lySHvobYLYADNWAsZhQLAQCgMx7g5ooHmwWwBBoBoBc1EeDvZ5mGuLVAnMWCAAyx753lSeeZYVS9QwQA2YPgLUkZh5PXQa7S+FcGqBtkDBxs4plMyGgGewNjWYZ0BwAqcth7xci7+kwmZeX+m4NCAB6BKxiiOcG2XOpR2OqZcDBAmANhVIApMZ+sgYEAEYt0M4Oa6fE5RsetrMCqBkGIHOwDmgOAKtBrMRl7bn/p4DvM+8HaBNllGYGsvbqAWAG1N4+mAG1G8jm9wsR+9xfCCflzgAAAABJRU5ErkJggg==);
  }

  10%,
  89% {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAo5JREFUeF7tW0FOwzAQbA6c4cAj4AP9CggJ8QEQj6EfgBM8hRfAH7jAAxCINiu1I7az6ziO3WxviR3HOzs7u3bcbjHzXzdz+xcBQDBgYgQuzo5/tqfw8v61l5Xe/sy8yUPAa5C3f7UAiCHPb587c7w8P1lfIxO8/Znh0j4ZA7wGeftXC4BmiDZhYQQyBftrzGFAFGdAANCrPvOoeC4Y0IsiA2z0EMD0g7HF8jf218bTskIAAOmymAiKp1aPD3sF9fbm7t/8rXleG0/GEY9PrgEBQK/ajAHiafGgRhc2TrMMCABYyWVsb54BRjvVbtUBIDO1imEqAGh46jjegsi8FggAnNkg1YOlmVANAzCLsNKXAWwNBQrA2NTXDBnKhABA2VpDwAczQDyFFZ52HyeA/fD6dHm9fkRbE7D7bJUaADAxsWoArgFYzc+YIO3CANwhkmtNLItrwOwBYGqeqhHIAMZYZMroGsAmNFQkmwdAWyZbNSIA6NMgYxq2ZxPBUqtBec/30ebb4P3VJv97S2Kr4fI+WgcEAMAta13AsgKj9NiedzMgFxPYpikrcDTgvNRPBkAe/Hh92jnZwTzqbfeuBruuM4fz9lySHvobYLYADNWAsZhQLAQCgMx7g5ooHmwWwBBoBoBc1EeDvZ5mGuLVAnMWCAAyx753lSeeZYVS9QwQA2YPgLUkZh5PXQa7S+FcGqBtkDBxs4plMyGgGewNjWYZ0BwAqcth7xci7+kwmZeX+m4NCAB6BKxiiOcG2XOpR2OqZcDBAmANhVIApMZ+sgYEAEYt0M4Oa6fE5RsetrMCqBkGIHOwDmgOAKtBrMRl7bn/p4DvM+8HaBNllGYGsvbqAWAG1N4+mAG1G8jm9wsR+9xfCCflzgAAAABJRU5ErkJggg==);
  }
}

.hug-bunny-bear .bunny::after {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAhRJREFUWEfdl71KA0EQx/cCki6ngqWNVc4XEB/EXLBIsLAJSiofRIxWFgkiJJcXER8gXiNYWIp6dkHIyhxOGDc7+3GLCKZJcruz89v/fOxeJP74E4X4bzVjCfZZXlRex2rIOUmbsRw/vJf8aRKLLP+wrqXbrNGIcwJQk2/nuGgr2RTT/M0bgjXQOWkn62KSFxEF+78Aul2aFMAxNc6wDj4D9dRxNgQ6ADAGR5h8dDFdDkAYL0cXy2kn3dMyhNTOG4ArWwCoiUU5jFumzuF5EMDnfC7W6nW2bQDA1ejc2FacATj5bU2rvRuLwXCgnaZzDhNXQlDVOXp9ub9hOZ0UCAGABB2QpFNJKgHQrNdVAD7Db1AAHCGI+ttaBVz9w2505aeWJoYAHMOHKlJJAVVGmyLBOSClXHYuLpsAglMkGKA8XslRays9Om5KQucyxAVtEKgCBeAqgHOu7QN0QZdwuCiwtddhW77XfcAlHLow9Lp99rISDEBDwYXAG8AWf6x9tc5NCnkloQsAOONKzrUJsUnoCqCrBE6VX1GASm5qQDDPCwAMdLdite8jgO0U9E5CWPhgZ0Nmj68/8oq7lCIAPfmo4VnaEcOn1buHtRGpuVAFwNQFrQCHSUPezorlZo73t8X13XPZO9TrNv5Xe0HvqC+mM/6NyfoqlSYNKWRU6jd2eAkFECmkAItFrWZ0blXApfWGzvkCkTGLMOCBzAMAAAAASUVORK5CYII=);
  animation: hug-bunny-bear forwards 1.8s;
}

@keyframes hug-bunny-bear {

  0%,
  4%,
  95%,
  100% {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAp5JREFUeF7tW8tRAzEMJRXAhR6gAkqBEzQA1UADDBdohQagCA5QwTLDRAwRiPckyxvv2tzCyvbq6ekbZ3PQ+d+mc/0PqgNwfnI4/QT56fWj+pkeo1Z/mdUA4FVE5B9f3ncMcnF69PW5FSbQDOgWAK8lLXntl60wATKgWwCiloyu80TuTFmTAVFFousylfLsNQCw0IpaMrrOY7VM2WYYoNOsKOmtF6x9rP0GAKUuIOslr+vKz9pf5OX53f3tn6LXVzdU5SiWt/aRzfV+xQwYABRGJGECaznrOLS+OgOiOHQPgHYh1pJRwKvFgOgLNQcAW8iUKmx1h7UYYGWTX1mgWwD2pfhcLgAZMADYTm/ZSo6NAVaFqP/PpkP2XEvOzAK1GLB4AFgFkGV07W9Ni1FvoCs6nTXEwmxv8Z0F0OzPemHWZRYLgI7S8plVHDGjNAuIxb3MkTkDZMAAAJgwO0aI71q+jHwcMS49C3QPQKmLoPzv9fHZGbAaAESRWgXR3N2fPg/2AgMABdlcTHh7fkBuW/QcTZXTpsLRt2wWAFFomqadOz5RRa11tQE4Prv89woAvB/QLQA6BmQVPJoJUQawlWJaDBgAbG93WV2g97tBYYKXAagX0M+rM0BXgt42uTkAUP7PdoUsAFhm6PsG7u8FBgBGLIjGANQNWjV96SxQ9t07AxYHQGn7m9UVeucE6d0gmvKyJbOXAXosHh2Ghl2AVYyViwLA7q8BK84C3oORfHMAtD4YQfmenQSZLjAA2CKAKkKL2mw9oH8vgO756SiO5JHvV2PAagDwuoJlUdQ9SlRGFvUyAHWBkAEDAGcssH4D5L0Fzsp7GWPFLDgTZIPhagHQrmAh6b3Xjwok9jnLmDADBgCsKRYqB2PAQvWiX/sTefGybppczqgAAAAASUVORK5CYII=);
  }

  5%,
  9%,
  90%,
  94% {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAppJREFUeF7tWstNBDEM3a0ALvQAFVAKnKABqAYaQFygFRqAIjhABYOE1tLuk7zv2TObyUzCDZJ44ufnL9luGv/ZNq7/phgAN5dnwz7Y71+/xb59zMjFLrEaAKKK2P63z58DQ9xenf//PjcTwgxoFoCoJb396I9zM0FmQLMAZC2ZPVc6LVMGZBXJnusAFEagM4ABnqVy9BzeI1ofYHpW5VXDAPXCnsFmB8AuZnkdKz/v4rb/+eXpYMvD/aNUKZrieB6/58mbjAEdABZMnHWPAbbdLOeJZ5ZHORhbJmdAFIfmAUDXUS0aBbpYDIherFoA1DyeVTiaFbLfYdnEjQHNAjCX4qdyhTADOgC76a1ayam+6VWI+HeWFtXvpSvBUzFg8QCoCjALmRzb502LvXrAfNrrHdg5Wgmy2Z93YdVlFgsARmnPgowBbF2NAdgjsApSrgRZDGAWZAqy9eoBYBXcVC4S9XEG7GQM6AAQqLMugtSP+vjsDBgbJKsBwBRhwZAhrq6rQU+Vp1aAtm/2brBaAEox4fvjNWvco+dYF0gZ0AHYITAMw8HbnqnNdSoG2D0vru+ODn7pVLh5ANRsEP2PkFlIZYDXBZocXC8eA5oHIFsIMQYwy1fDgNUBoPo+ywrMNTwGZC1fXSW4WgCYYmgJNlOM9v9RhngvTtK9QPMARINelAEY3ZFRbAaI5ydnQAfACf84EbJt3ti82nY4mwZXA0CpdlhlgBr1Vd+vZh6wWgDUNMkAwK5u7LtADF10HjA2FrD/GVYPQDQWmEKWdxmAUwOgzgHkGNAB2CHALImFEVZe3mNmZAr6qCcn+g7A61ppDBjLADzvKcgAQjnFAWCK2Hr0nT+bJ3jrKmBMvsyADgCDcqHrYQYsVE/32n9CbI5utjRgQAAAAABJRU5ErkJggg==);
  }

  10%,
  89% {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAvNJREFUeF7tW71Ow0AMTiuhbvxJjCxMlBdAPAi0YgAxsCAQEw+CKEwMIIRE2xdBPAB0QWJgRPxtCIkgrjEiVoztS5rkeumWXi7Off782b4ktcDzX83z9QeFAbC2OBX+Bb83eCvkXgox+rPwsQFAu5BW5Pmru9dY9LWaU+a4N3jP1SmpjXkLgNaTAFQXeR6L8Fpz1vzVH7ykdo5E4K2NeAuA1JPt5rRxQDdSdwow5xhQARCpOBfLFQPGNQSksWzLADyPU3K4H3weaA83X50FKgCISo5CGjyKKz/qfGkdAGJ8fH6UeKndzb1YFqLsjYwBYNB7ALgYpOqAevAVG4q1jkEQUJ6HSaVhgHcAfH58mDVPNBratZvzQQNOzg+t5hfOgLEFQJr+Urntz+T20nB/oHPWUV1SGvtwUXEW8BaAvBeO3f10c6FiQOYaUAGgrPys3JUwCQqoDlHpcXakWsBqQFEMcAYAqtSVlsD4PHwMGgAexYzg/ue6wtQM8B4A3PTAsbT745omnAXA4zCP0ojcNQCY4C0AlCqnDRHn6wDnAQjDELfiXApOHLcNkcIZ4D0A4M68CyLbQkiq/uXvBqPnCtpSeGQAZMUErAWUoIx64WoGVAAgV2Uljlz9IGXC3PIGW9Yn2bKa9HMhbwGQPh63KhZS7AvsbO6b2do3S9QMqAAQvh8gZQCVFaSxD3acZYAzAGRVCeIFaz3NMWtkhVAFQMa7w9ouL+udIHUlmBUDwLD3AEh7Am7vD2tC6TWA2kTlxE0qls4AQC1YGxrOMsA5AOCGtaWw9gmRlOoYwNJWgmMHwOrCjNkl7t0//6tb2jdF8R4g9cyPMnrQ2jBDZw+676DU3aD3AEi3xvJigDbtYQapGVABECGw3pw0WnB5+5YYltsr8+b/0+vHGMjc2914nMsKO1vRTtCt3TdG1gzwHoDfUIiYEIRDLAHRq4y+BAVGhMHwEWUtsvBVr5vjvqXn1d0glX5avgPANTFlH7fWgLIvTHp/32FrFm4fo1/PAAAAAElFTkSuQmCC);
  }
}

/* hp bar */
.hug-bear-bunny::after,
.hug-bunny-bear::after {
  position: absolute;
  top: -55px;
  left: calc(-1 * var(--h));
  content: '';
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAGCAYAAACij5zfAAAAAXNSR0IArs4c6QAAADdJREFUOE9jZEAD4Rr8/9HFqMlfeeMjI7J5KByQ5egKqGk5yCx0O0YdMLhCABZH1I53ZPPQ0xgA1HAoB/krc8YAAAAASUVORK5CYII=);
  width: calc(var(--h) * var(--m));
  height: calc(6px * var(--m));
  background-size: calc(var(--h) * var(--m)) calc(6px * var(--m));
  background-repeat: no-repeat;
  image-rendering: pixelated;
}

.hug-bear-bunny::before,
.hug-bunny-bear::before {
  position: absolute;
  top: -55px;
  left: -24px;
  content: '';
  width: calc(24px * var(--m));
  height: calc(6px * var(--m));
  animation: top-up forwards 1.4s;
}

@keyframes top-up {
  0% {
    width: 0;
    background-color: #8a8a8a;
  }

  100% {
    width: calc(24px * var(--m));
    background-color: #36e9ce;
  }
}

.bear::after {
  background-image: url(data:image/png;base64,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);
}

.overflow-hidden {
  overflow: hidden;
}

.flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

.sprite-container {
  position: absolute;
  --w: 20px;
  --h: 32px;
  --m: 2;
  width: 0;
  height: 0;
  z-index: 1;
}

.sprite-container:has(.bunny) {
  transition: 1s;
}

.sprite {
  position: absolute;
  --x: 3;
  /* grid */
  --y: 4;
  top: calc(-1 * var(--w));
  left: calc(-1 * var(--w));
  --width: calc(var(--w) * var(--m));
  --height: calc(var(--h) * var(--m));
  width: var(--width);
  height: var(--width);
}

.sprite::after {
  position: absolute;
  bottom: 0;
  content: '';
  width: var(--width);
  height: var(--height);
  background-size: calc(var(--width) * var(--x)) calc(var(--height) * var(--y));
  background-repeat: no-repeat;
  image-rendering: pixelated;
  background-position: var(--bx) var(--by);
}

.map-cover {
  position: absolute;
  width: 100%;
  height: 100%;
  background-repeat: repeat;
  image-rendering: pixelated;
}

.map {
  position: absolute;
  top: 0;
  left: 0;
  transition: 0.4s;
  background-color: #7ab055;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAG5JREFUOE9jZKAQMFKon2HUAAYGhv8MDP/JdQHIgP////9nYGRkxGsITgNwGYLTAFyGYDUAlyFYDcBmCKMgG/N/rPFLKBXidwEhJxJ0AaGEQrYXBk9CQk6G5BuAKyERZQA2Q0gyAFsqJNoAAMK5YhAbV4yUAAAAAElFTkSuQmCC);
  background-size: 32px;
  image-rendering: pixelated;
}

.map.slow-transition {
  transition: 1.8s;
}

.map.transition {
  transition: 0s;
}

.player-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Fix tree visibility issues */
.tree {
  position: absolute;
  width: 32px;
  /* Add explicit width */
  height: 48px;
  /* Add explicit height */
  z-index: 1;
  /* Ensure trees are visible */
}

.tree>div {
  position: absolute;
  --w: 32px;
  --h: 48px;
  --m: 2;
  /* Reduced multiplier for better size */
  width: calc(var(--w) * var(--m));
  height: calc(var(--h) * var(--m));
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  /* Center the tree */
}

.tree>div::after {
  position: absolute;
  content: '';
  top: 0;
  /* Change from bottom:0 to top:0 */
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('./images/trees/tree1.png');
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  image-rendering: pixelated;
}

.tree:nth-child(3n+1)>div::after {
  background-image: url('./images/trees/tree2.png');
}

.tree:nth-child(3n+2)>div::after {
  background-image: url('./images/trees/tree3.png');
}

.tree:nth-child(3n)>div::after {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAwCAYAAABwrHhvAAAABHNCSVQICAgIfAhkiAAAAmRJREFUWIXtmL9rU1EUxz/35SVN0yRNUmotVktRFBF/IYriIA4uTk4uguDiJDj4Nzg4iODg4iL4BxREcHB0F0UUEalVVLCIVFuL1jZNTJvX5D0fh7wkL8l7SUzaQfCCgZf3cs/53nPPvfecew3UsgEGYNQCEsw+l9ynHMqxJponEHE7K+wBn589mgcAoDfZzZ2Hz3j05BmNZpPxsVEe3L/HrRvX+fjpM3MLi2xubmIYBrquMz8/z/2Hj3n15h2DA/2srKywvr6OZVnouk46ncZ1XUZGRng7+Y73Hz4xderEjn2Nnq4Y4yMpAFhYXOTLt+8IIQCgWCxSqVQQQhCPxxFCIIRACAHDMDAMA0IIbNtGCEEmk8GyLCzLAoBCoUCtVgNEqBA6CGiahhACy7JwHCe0TqgSWpYl5ZZlSSWiqG3btszn83lisRi6rpNIJLBtG0QU2Dc0BLJc0zRZnkwmASCXy1GtVjEMg1gshq7rgXkQKQQbGxtS3t3dDQD5fN5WIkoORM6CsIKBQIkCrwtyudw/cidKoY4LYcdx0HUd0zRxHCfU/eQQRIjSieM4CCEQQuC6ri2zx5RSCCEQQkSOQqQQJJNJKpUKiUSCdDoN4Pn8fw0URUH3fN4xREEQKQTj46MAnD97hp6eHlnvb9IpQv8y/K+9bhR5AwF+v3i5BkK3IP9y/AIIA0UXWRrGvwAAAABJRU5ErkJggg==);
}

/* Enhance shadow effect for trees */
.tree>div::before {
  position: absolute;
  content: '';
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 32px;
  /* Increased from 24px */
  height: 12px;
  /* Increased from 8px */
  background: rgba(0, 0, 0, 0.15);
  border-radius: 50%;
  filter: blur(2px);
}

/* Adjust tree size variations */
.tree:nth-child(4n)>div {
  --m: 2.5;
}

.tree:nth-child(4n+1)>div {
  --m: 3.5;
}

/* Enhanced sway animation */
.tree>div {
  animation: treeSway 5s ease-in-out infinite;
  transform-origin: bottom center;
}

.tree:nth-child(2n)>div {
  animation-delay: 0.7s;
}

.tree:nth-child(3n)>div {
  animation-delay: 1.2s;
}

@keyframes treeSway {

  0%,
  100% {
    transform: rotate(0deg);
  }

  25% {
    transform: rotate(1.5deg);
  }

  75% {
    transform: rotate(-1deg);
  }
}

/* Add stone styles */
.stone {
  position: absolute;
  width: 0;
  height: 0;
}

.stone>div {
  position: absolute;
  --w: 24px;
  --h: 24px;
  --m: 2;
  --width: calc(var(--w) * var(--m));
  --height: calc(var(--h) * var(--m));
  width: var(--width);
  height: var(--height);
  left: calc((var(--m) / -2) * var(--w));
  top: calc((var(--m) / -2) * var(--w));
}

.stone>div::after {
  position: absolute;
  content: '';
  bottom: 0;
  background-image: url('./images/stones/stone1.png');
  image-rendering: pixelated;
  background-repeat: no-repeat;
  width: var(--width);
  height: var(--height);
  background-size: var(--width) var(--height);
}

.stone:nth-child(2n)>div::after {
  background-image: url('./images/stones/stone2.png');
}

.stone>div::before {
  position: absolute;
  content: '';
  bottom: -4px;
  left: 50%;
  transform: translateX(-50%);
  width: 20px;
  height: 6px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 50%;
  filter: blur(1px);
}

/* other */

.sign {
  position: fixed;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  color: #57280f;
  bottom: 8px;
  left: 8px;
  font-size: 7px;
  padding: 2px 5px;
  border-radius: 10px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
  z-index: 1000;
  text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(3px);
}

.indicator {
  position: absolute;
  top: 24px;
  right: 16px;
  color: #57280f;
  font-size: 16px;
  opacity: 0.8;
  z-index: 999;
  pointer-events: none;
  height: 32px;
  width: 36px;
  line-height: 40px;
}

.indicator::before {
  position: absolute;
  content: '';
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAAXNSR0IArs4c6QAAALRJREFUOE+llNsNgCAMRWUCHUMn0hF1Ih1DJ8CU2OZSofXBD5KWw6EIobna2LeRv6lftiPg2IunZEqa1x3nNdPQCcyL08QqiIIMK4EwLiC2YiW201ZWXOoQY8xqJLUbuqStt24alZKzwqkBGotRrQ6vQF8gvABbhT8QhN1AtIJXK51D4wz0BIIW+Ju4WyM4NcvyZqRPCA0t2wSq3TXr2DEmp4a33ytyyZhfieyp0HfOstLPzAmHG47SmZBqWwAAAABJRU5ErkJggg==);
  width: 36px;
  height: 32px;
  background-size: 100%;
  image-rendering: pixelated;
  left: -42px;
}

.indicator.happy::before {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAKNJREFUOE/lVMERgCAMsxPIGDqRjqgT6Rg6Qb1worVg68PzIz9oCGnSgyq1uqZmHI3zSrqG/V39AgZomJZ4v29DRmbVDyIJSkokmVf/K1FMqQ3RsnEPQSYpPTQ9KsX/DVEpWk+NHhHSJOg7DeUdmcZgfyFKAIushMmInrajcS6RVOapzDwqvYYzy7eoKH0NnsGW8fhy3h9IvMjMDJlPFjogOoVseByz1PgRF28AAAAASUVORK5CYII=);
  height: 36px;
  top: -4px;
}

a {
  color: #57280f;
  text-decoration: none;
  text-transform: none;
}

a:hover {
  text-decoration: underline;
}

/* starting overlay styles */

.start-overlay {
  position: fixed;
  z-index: 100000;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: #102429;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  background-image: linear-gradient(45deg, #b6e7a0 25%, #8fd17e 25%, #8fd17e 50%, #b6e7a0 50%, #b6e7a0 75%, #8fd17e 75%, #8fd17e 100%);
  background-size: 20px 20px;
  image-rendering: pixelated;
  padding: 20px;
}

.start-content {
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  box-shadow:
    0 0 0 4px #e6f9e0,
    0 0 0 8px #b7e3b0,
    inset 0 0 0 2px #e6f9e0;
  padding: 32px 24px;
  border-radius: 0;
  position: relative;
  animation: float 3s ease-in-out infinite;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 24px;
  max-width: 90%;
  width: max-content;
}

.start-content h1 {
  font-size: clamp(16px, 4vw, 24px);
  color: #e2deec;
  text-transform: uppercase;
  position: relative;
  text-shadow: 2px 2px 0 #6b6a67;
  letter-spacing: 1px;
  margin: 0;
  text-align: center;
}

.start-content p {
  font-size: clamp(10px, 2vw, 12px);
  color: #c2d0c0;
  line-height: 1.6;
  text-shadow: 1px 1px 0 #676758;
  margin: 0;
  text-align: center;
}

.start-btn {
  white-space: nowrap;
  background: #f3f9f2;
  color: #9ab49a;
  border: none;
  padding: clamp(8px, 2vw, 12px) clamp(16px, 3vw, 24px);
  font-size: clamp(12px, 2.5vw, 16px);
  font-family: 'Press Start 2P', cursive;
  cursor: pointer;
  position: relative;
  text-transform: uppercase;
  transition: all 0.2s;
  border: 4px solid #e2deec;
  min-width: max-content;
}

.start-btn:hover {
  background: #e2deec;
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.start-btn:active {
  transform: translateY(2px);
  box-shadow: none;
}

/* Start animations */
@keyframes float {

  0%,
  100% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }
}

.start-overlay.hiding {
  animation: fadeOut 0.5s forwards;
}

@keyframes fadeOut {
  0% {
    opacity: 1;
    transform: scale(1);
  }

  100% {
    opacity: 0;
    transform: scale(1.1);
  }
}

/* Hide game UI when overlay is visible */
body.starting .wrapper,
body.starting .indicator,
body.starting .sign {
  filter: blur(2px);
  pointer-events: none;
  user-select: none;
}

/* Mobile Controls */
.mobile-controls {
  position: fixed;
  bottom: 20px;
  right: -200px;
  /* Start off-screen */
  z-index: 1000;
  display: none;
  transition: right 0.3s ease-out;
}

.mobile-controls.active {
  right: 20px;
}

.tool-btn {
  width: 28px;
  height: 28px;
  border-radius: 0;
  background: #e2deec;
  border: 2px solid #b7e3b0;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #57280f;
  box-shadow: 0 2px 0 #b7e3b0, 2px 2px 0 #b7e3b0, 0 0 0 4px #fff7fa;
  transition: all 0.1s;
  padding: 0;
  font-family: 'Press Start 2P', monospace;
  font-size: 13px;
  image-rendering: pixelated;
  outline: 2px solid #b7e3b0;
  outline-offset: -2px;
}

.tool-btn.settings::before {
  content: '';
  display: block;
  width: 18px;
  height: 18px;
  background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="2" width="20" height="20" rx="2" fill="%23e2deec" stroke="%2357280f" stroke-width="2"/><rect x="7" y="7" width="10" height="10" rx="2" fill="none" stroke="%2357280f" stroke-width="2"/><rect x="11" y="11" width="2" height="2" fill="%2357280f"/></svg>');
  background-size: contain;
  background-repeat: no-repeat;
  margin: auto;
  image-rendering: pixelated;
}

.tool-btn:hover {
  background: #b7e3b0;
  box-shadow: 0 2px 0 #b7e3b0, 2px 2px 0 #b7e3b0, 0 0 0 4px #e2deec;
  outline-color: #57280f;
}

.tool-btn:active {
  background: #c2d0c0;
  transform: translate(1px, 1px);
  box-shadow: none;
  outline-color: #6b6a67;
}


@keyframes pulse {
  0% {
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
  }

  50% {
    box-shadow: 0 4px 25px rgba(183, 227, 176, 0.4);
  }

  100% {
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
  }
}

.tool-btn svg {
  width: 28px;
  height: 28px;
  animation: rotate 10s linear infinite;
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

.control-menu {
  position: absolute;
  bottom: 70px;
  right: -100%;
  background: #fff7fa;
  padding: 10px 18px 14px 18px;
  border-radius: 0;
  display: none;
  transform-origin: bottom right;
  transition: right 0.3s cubic-bezier(.77, 0, .18, 1);
  box-shadow:
    0 0 0 4px #e6f9e0,
    0 0 0 8px #b7e3b0,
    inset 0 0 0 2px #e2deec;
  border: 4px solid #b7e3b0;
  font-family: 'Press Start 2P', monospace, Arial, Helvetica, sans-serif;
  font-size: 11px;
  color: #57280f;
  text-shadow: 1px 1px 0 #e2deec;
  image-rendering: pixelated;
  outline: 2px solid #e2deec;
  outline-offset: -6px;
}

.control-menu.show {
  display: block;
  right: 0;
  animation: pixel-pop-in 0.18s cubic-bezier(.77, 0, .18, 1);
}

@keyframes pixel-pop-in {
  0% {
    filter: blur(2px);
    opacity: 0;
    transform: scale(0.9) translateY(10px);
  }

  100% {
    filter: none;
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.control-menu button,
.control-menu .control-btn {
  font-family: inherit;
  font-size: 11px;
  background: #e2deec;
  color: #57280f;
  border: 2px solid #b7e3b0;
  border-radius: 0;
  padding: 6px 12px;
  margin: 0 4px 4px 0;
  box-shadow: 2px 2px 0 #b7e3b0, 0 0 0 4px #fff7fa;
  text-transform: uppercase;
  letter-spacing: 1px;
  outline: none;
  transition: background 0.1s, box-shadow 0.1s, color 0.1s;
  image-rendering: pixelated;
}

.control-menu button:hover,
.control-menu .control-btn:hover {
  background: #b7e3b0;
  color: #4d220a;
  box-shadow: 2px 2px 0 #e2deec, 0 0 0 4px #e2deec;
  border-color: #57280f;
}

.control-menu button:active,
.control-menu .control-btn:active {
  background: #c2d0c0;
  color: #6b6a67;
  box-shadow: none;
  border-color: #6b6a67;
}

.control-menu hr {
  border: 0;
  border-top: 2px solid #b7e3b0;
  margin: 10px 0;
  height: 0;
  background: none;
}

.control-menu label {
  font-family: inherit;
  font-size: 10px;
  color: #57280f;
  text-shadow: 1px 1px 0 #e2deec;
  margin-right: 8px;
  image-rendering: pixelated;
}

.control-menu input[type="checkbox"],
.control-menu input[type="radio"] {
  width: 14px;
  height: 14px;
  margin-right: 4px;
  accent-color: #b7e3b0;
  border: 2px solid #b7e3b0;
  background: #fff7fa;
  border-radius: 0;
  vertical-align: middle;
  image-rendering: pixelated;
}

.control-btn {
  background: rgba(255, 255, 255, 0.5);
  border: 2px solid rgba(255, 255, 255, 0.8);
  padding: 10px 20px;
  border-radius: 20px;
  color: #57280f;
  font-size: 14px;
  transition: all 0.3s;
  margin: 0 5px;
}

.control-btn.active {
  background: #e6f9e0;
  box-shadow: 0 2px 10px rgba(183, 227, 176, 0.4);
  transform: scale(1.05);
}

.joystick-base {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translate(-50%, 100px);
  width: 120px;
  height: 120px;
  background: rgba(255, 255, 255, 0.15);
  border: 3px solid rgba(255, 255, 255, 0.4);
  border-radius: 50%;
  display: none;
  touch-action: none;
  transition: all 0.3s ease-out;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
}

.joystick-base.active {
  display: block;
  transform: translate(-50%, 0);
}

.joystick-stick {
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, #ffffff, #e6f9e0);
  border: 3px solid rgba(255, 255, 255, 0.8);
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  transition: transform 0.1s, box-shadow 0.1s;
}

.joystick-stick:active {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

@media (max-width: 768px) {
  .mobile-controls {
    display: block;
    animation: slideIn 0.5s forwards;
  }

  @keyframes slideIn {
    from {
      right: -200px;
      opacity: 0;
    }

    to {
      right: 20px;
      opacity: 1;
    }
  }
}

/* Tutorial Styles */
.tutorial-overlay {
  position: fixed;
  z-index: 100000;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(16, 36, 41, 0.95);
  display: none;
  align-items: center;
  justify-content: center;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  padding: 15px;
}

.tutorial-content {
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  box-shadow:
    0 0 0 4px #e6f9e0,
    0 0 0 8px #b7e3b0,
    inset 0 0 0 2px #e6f9e0;
  padding: 32px;
  border-radius: 0;
  position: relative;
  max-width: min(95%, 480px);
  width: 100%;
}

.tutorial-step {
  display: none;
  text-align: center;
  flex-direction: column;
  gap: 15px;
}

.tutorial-step.active {
  display: flex;
  animation: pixel-pop-in 0.3s cubic-bezier(.77, 0, .18, 1);
}

.tutorial-step h2 {
  font-size: clamp(12px, 4vw, 18px);
  color: #57280f;
  margin: 0;
}

.tutorial-step h3 {
  font-size: clamp(10px, 3vw, 14px);
  color: #6b6a67;
  margin: 0;
}

.tutorial-step p {
  font-size: clamp(9px, 2.5vw, 12px);
  color: #57280f;
  line-height: 1.6;
  margin: 0;
}

.controls-info {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin: 10px 0;
  width: 100%;
}

.pc-controls,
.mobile-controls-info {
  width: 100%;
  padding: 15px;
  background: rgba(255, 255, 255, 0.5);
  border: 2px solid #b7e3b0;
  border-radius: 8px;
}

.pc-controls img,
.mobile-controls-info img {
  max-width: 100px;
  margin: 10px auto;
  display: block;
}

.mobile-controls-info ul {
  list-style: none;
  padding: 0;
  margin: 10px 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.mobile-controls-info li {
  font-size: clamp(9px, 2.5vw, 11px);
  color: #57280f;
  padding: 5px 10px;
  background: rgba(183, 227, 176, 0.2);
  border-radius: 4px;
}

.mobile-controls-info small {
  font-size: 8px;
  color: #6b6a67;
  margin-top: 8px;
  font-style: italic;
}

.tutorial-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 15px;
}

.tutorial-next,
.tutorial-start {
  font-family: 'Press Start 2P', cursive;
  font-size: clamp(9px, 2.5vw, 12px);
  min-width: 80px;
  padding: 8px 16px;
  margin: 0;
}

@media (min-width: 768px) {
  .tutorial-content {
    max-width: 600px;
  }

  .controls-info {
    flex-direction: row;
  }

  .pc-controls,
  .mobile-controls-info {
    flex: 1;
  }
}

/* Mission Step Styles */
.mission-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin: 15px 0;
  padding: 15px;
  background: rgba(183, 227, 176, 0.1);
  border: 2px solid #b7e3b0;
  border-radius: 8px;
}

.mission-text {
  display: flex;
  flex-direction: column;
  gap: 12px;
  text-align: center;
}

.main-goal {
  font-size: clamp(11px, 3vw, 15px);
  color: #57280f;
  font-weight: bold;
  text-transform: uppercase;
  text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.8);
}

.mission-details {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.mission-details p {
  font-size: clamp(8px, 2vw, 11px);
  color: #6b6a67;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 4px;
  display: inline-block;
}

.bunny-examples {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-top: 10px;
}

.bunny-type {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.bunny-type img {
  width: 48px;
  height: 48px;
  image-rendering: pixelated;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.bunny-type span {
  font-size: clamp(8px, 2vw, 10px);
  color: #57280f;
  background: #e6f9e0;
  padding: 4px 8px;
  border-radius: 12px;
  border: 1px solid #b7e3b0;
}

@media (min-width: 768px) {
  .mission-content {
    padding: 20px;
  }

  .bunny-examples {
    gap: 40px;
  }

  .bunny-type img {
    width: 64px;
    height: 64px;
  }
}

/* Game Mode Overlay Styles */
.mode-overlay {
  position: fixed;
  z-index: 100001;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: #102429e6;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  padding: 20px;
}

.mode-content {
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  box-shadow:
    0 0 0 4px #e6f9e0,
    0 0 0 8px #b7e3b0,
    inset 0 0 0 2px #e6f9e0;
  padding: 32px 24px;
  border-radius: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 24px;
  max-width: 90%;
  width: max-content;
}

.mode-content h1 {
  font-size: clamp(16px, 4vw, 24px);
  color: #57280f;
  text-align: center;
  margin-bottom: 16px;
}

.mode-buttons {
  display: flex;
  flex-direction: column;
  gap: 18px;
  justify-content: center;
  align-items: center;
}

.mode-btn {
  font-family: 'Press Start 2P', cursive;
  font-size: clamp(12px, 2.5vw, 16px);
  background: #e2deec;
  color: #57280f;
  border: 4px solid #b7e3b0;
  padding: 14px 28px;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
  min-width: 100px;
}

.mode-btn:hover {
  background: #b7e3b0;
  color: #4d220a;
  transform: translateY(-2px) scale(1.04);
}

.mode-btn:active {
  background: #c2d0c0;
  color: #6b6a67;
  transform: translateY(2px) scale(0.98);
}

/* Hide game UI when mode overlay is visible */
body.mode-selecting .wrapper,
body.mode-selecting .indicator,
body.mode-selecting .sign,
body.mode-selecting .start-overlay,
body.mode-selecting .tutorial-overlay {
  filter: blur(2px);
  pointer-events: none;
  user-select: none;
}

body.mode-selecting .mode-overlay {
  display: flex;
}

.mode-overlay[style*="display: none"] {
  display: none !important;
}

/* Timer Styles */
.game-timer {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 1002;
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  border-radius: 0;
  padding: 6px 18px 6px 18px;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  font-size: 16px;
  letter-spacing: 2px;
  color: #57280f;
  box-shadow: 0 2px 8px #b7e3b0, 0 0 0 4px #e6f9e0, 0 0 0 8px #b7e3b0, inset 0 0 0 2px #e6f9e0;
  text-shadow: 1px 1px 0 #fff, 2px 2px 0 #b7e3b0;
  display: none;
  user-select: none;
  pointer-events: none;
}

.game-over-message {
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  box-shadow:
    0 0 0 4px #e6f9e0,
    0 0 0 8px #b7e3b0,
    inset 0 0 0 2px #e6f9e0;
  border-radius: 0;
  padding: 32px 24px;
  max-width: 90vw;
  width: max-content;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 24px;
  animation: float 3s ease-in-out infinite;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
}

.game-over-message p {
  background: none;
  border: none;
  box-shadow: none;
  color: #57280f;
  font-size: clamp(13px, 2.5vw, 18px);
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  margin: 0;
  text-align: center;
  padding: 0;
  width: auto;
  max-width: 90vw;
  text-shadow: 1px 1px 0 #fff;
}

.game-over-message .end-actions {
  display: flex;
  flex-direction: row;
  gap: 18px;
  align-items: center;
  margin-top: 0;
  justify-content: center;
}

.game-over-message .retry-btn,
.game-over-message .change-mode-btn {
  font-size: 0;
  min-width: 0;
  min-height: 0;
  padding: 0;
  width: 48px;
  height: 48px;
  border-radius: 8px;
  text-align: center;
  text-indent: -9999px;
  overflow: hidden;
}

.game-over-message .retry-btn span,
.game-over-message .change-mode-btn span {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Coffee Button and Modal Styles */
.coffee-btn {
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  border-radius: 50%;
  width: 48px;
  height: 48px;
  min-width: 48px;
  min-height: 48px;
  max-width: 48px;
  max-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow:
    0 0 0 4px #fff7fa,
    0 2px 8px #b7e3b0;
  transition: background 0.2s, transform 0.1s;
  padding: 0;
  margin: 0;
  outline: none;
  position: relative;
}

.coffee-btn:hover {
  background: #ffe9b3;
  transform: translateY(-2px) scale(1.04);
}

.coffee-btn:active {
  background: #ffe9b3;
  transform: translateY(2px) scale(0.98);
}

.coffee-btn img {
  width: 30px;
  height: 30px;


  object-fit: cover;
  display: block;
}

.coffee-modal {
  display: none;
  align-items: center;
  justify-content: center;
}

.coffee-modal[style*="display: flex"] {
  display: flex !important;
}

.coffee-modal .coffee-modal-close {
  font-family: inherit;
  font-size: 22px;
  background: none;
  border: none;
  color: #57280f;
  cursor: pointer;
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 1;
}

.coffee-modal a {
  text-decoration: none;
  background: #ffdd00;
  color: #57280f;
  font-family: 'Press Start 2P', Arial, sans-serif;
  font-size: 13px;
  padding: 10px 24px;
  border-radius: 8px;
  box-shadow: 0 2px 8px #b7e3b0;
  font-weight: bold;
  display: inline-block;
  margin-top: 8px;
}

.coffee-modal a img {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  vertical-align: middle;
  margin-right: 8px;
}

/* 8-bit/pixel style for coffee button and animated pixel chat bubble */
.coffee-btn-wrap {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.pixel-coffee-btn {
  background: #ffe9b3;
  border: 4px solid #b7e3b0;
  border-radius: 4px;
  width: 48px;
  height: 48px;
  min-width: 48px;
  min-height: 48px;
  max-width: 48px;
  max-height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow:
    0 0 0 4px #fff7fa,
    0 2px 8px #b7e3b0,
    0 0 0 0 #000;
  transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
  padding: 0;
  margin: 0;
  outline: none;
  position: relative;
  z-index: 2;
}

.pixel-coffee-btn:hover,
.pixel-coffee-btn:focus {
  background: #fff7fa;
  box-shadow:
    0 0 0 4px #ffe9b3,
    0 2px 8px #b7e3b0,
    0 0 0 0 #000;
  transform: translateY(-2px) scale(1.04);
}

.pixel-coffee-btn:active {
  background: #ffe9b3;
  transform: translateY(2px) scale(0.98);
}

.coffee-btn img {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  object-fit: cover;
  display: block;
  box-shadow: 0 2px 0 #b7e3b0, 2px 2px 0 #b7e3b0;
}

.coffee-bubble.pixel-bubble {
  display: none;
  position: absolute;
  left: 60px;
  top: 0;
  min-width: 120px;
  background: #fff7fa;
  border: 4px solid #b7e3b0;
  border-radius: 8px;
  font-family: 'Press Start 2P', Arial, monospace;
  font-size: 11px;
  color: #57280f;
  padding: 10px 18px 10px 18px;
  box-shadow:
    0 0 0 4px #ffe9b3,
    0 2px 8px #b7e3b0,
    0 0 0 0 #000;
  text-align: center;
  z-index: 10;
  pointer-events: none;
  opacity: 0;
  animation: pixel-bubble-in 0.32s cubic-bezier(.77, 0, .18, 1) forwards;
}

.coffee-btn-wrap:hover .coffee-bubble,
.coffee-btn-wrap:focus-within .coffee-bubble {
  display: block;
  animation: pixel-bubble-in 0.32s cubic-bezier(.77, 0, .18, 1) forwards;
}

@keyframes pixel-bubble-in {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(10px);
    filter: blur(2px);
  }

  80% {
    opacity: 1;
    transform: scale(1.05) translateY(-2px);
    filter: blur(0.5px);
  }

  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: none;
  }
}

.coffee-bubble.pixel-bubble::after {
  content: "";
  position: absolute;
  left: -16px;
  top: 16px;
  width: 16px;
  height: 16px;
  background: #fff7fa;
  border-left: 4px solid #b7e3b0;
  border-bottom: 4px solid #b7e3b0;
  border-radius: 0 0 0 8px;
  transform: rotate(-30deg);
  z-index: 1;
  box-shadow: -2px 2px 0 #ffe9b3;
}

/* New fullscreen loading hug animation */
.loading-overlay {
  position: fixed;
  z-index: 100002;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  /* Theme background */
  background: linear-gradient(135deg, #b6e7a0 0%, #8fd17e 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  transition: opacity 0.5s;
}

.loading-hug-anim {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 220px;
  height: 180px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  pointer-events: none;
  z-index: 10;
}

.loading-bear.sprite-container,
.loading-bunny.sprite-container {
  position: absolute;
  bottom: 56px;
  width: 64px;
  height: 96px;
  --w: 20px;
  --h: 32px;
  --m: 3;
  z-index: 2;
  pointer-events: none;
  transition: left 0.5s, top 0.5s;
  left: 80px !important;
  animation-fill-mode: forwards;
}

.loading-bear.sprite-container {
  /* Smoother, longer cubic-bezier for natural movement */
  animation: loading-bear-move 1.8s cubic-bezier(.77, 0, .18, 1) forwards;
}

.loading-bunny.sprite-container {
  z-index: 3;
  /* Smoother, longer cubic-bezier for natural movement */
  animation: loading-bunny-hug 1.8s cubic-bezier(.77, 0, .18, 1) forwards;
}

.loading-bunny.sprite-container.sad .bunny.sprite::after {
  animation: none;
}

.loading-bunny.sprite-container.hug .bunny.sprite::after {
  /* Smoother hug, slightly longer */
  animation: loading-bunny-hug-sprite 1s cubic-bezier(.77, 0, .18, 1) forwards;
}

/* Smoother bear movement */
@keyframes loading-bear-move {
  0% {
    left: 40px;
  }

  60% {
    left: 80px;
  }

  100% {
    left: 80px;
  }
}

/* Smoother bunny movement */
@keyframes loading-bunny-hug {
  0% {
    left: 116px;
  }

  60% {
    left: 116px;
  }

  100% {
    left: 100px;
  }
}

/* Smoother, longer hug effect */
@keyframes loading-bunny-hug-sprite {
  0% {
    filter: brightness(1);
    transform: scale(1) rotate(0deg);
  }

  50% {
    filter: brightness(1.1);
    transform: scale(1.08) rotate(-4deg);
  }

  100% {
    filter: brightness(1);
    transform: scale(1) rotate(0deg);
  }
}

/* --- Fix loading hug bear/bunny/HP bar ghosting --- */
.loading-bar-bg {
  width: 180px;
  height: 18px;
  background: #e6f9e0;
  border: 3px solid #b7e3b0;
  border-radius: 12px;
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  overflow: hidden;
  box-shadow: 0 2px 8px #b7e3b0, 0 0 0 2px #fff7fa;
  z-index: 11;
  transition: opacity 0.5s;
}

.loading-bar-fill {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #b7e3b0 0%, #ffe9b3 100%);
  border-radius: 12px;
  transition: width 0.25s cubic-bezier(.77, 0, .18, 1), opacity 0.5s;
  z-index: 12;
}

/* Fade out all together */
.loading-overlay.hide .loading-bear.sprite-container,
.loading-overlay.hide .loading-bunny.sprite-container,
.loading-overlay.hide .loading-bar-bg,
.loading-overlay.hide .loading-bar-fill {
  opacity: 0;
  transition: opacity 0.5s;
}

.loading-text {
  position: absolute;
  bottom: -28px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 18px;
  color: #fff;
  letter-spacing: 2px;
  text-align: center;
  font-family: 'Press Start 2P', Arial, Helvetica, sans-serif;
  text-shadow: 2px 2px 0 #57280f;
  pointer-events: none;
}

.loading-overlay.hide {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s;
}

/* Remove old loading bar styles */
.loading-content,
.loading-bar-wrap,
.loading-bar-characters,
.loading-bar-bear,
.loading-bar-bunny,
.loading-center {
  display: none !important;
}

/* Match coffee button style with other end message buttons */
.end-message .coffee-btn {
  font-size: 0;
  min-width: 0;
  min-height: 0;
  padding: 0;
  width: 48px;
  height: 48px;
  border-radius: 8px;
  background: #e2deec;
  border: 4px solid #b7e3b0;
  box-shadow: 0 0 0 4px #fff7fa, 0 2px 8px #b7e3b0;
  transition: background 0.2s, transform 0.1s;
}

.end-message .coffee-btn:hover {
  background: #b7e3b0;
  transform: translateY(-2px) scale(1.04);
}

.end-message .coffee-btn:active {
  background: #c2d0c0;
  transform: translateY(2px) scale(0.98);
}

.end-message .coffee-btn img {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  display: block;
}

/* Match all end message action buttons */
.end-message .end-actions button {
  font-size: 0;
  min-width: 0;
  min-height: 0;
  padding: 0;
  width: 48px;
  height: 48px;
  border-radius: 8px;
  background: #e2deec;
  border: 4px solid #b7e3b0;
  box-shadow: 0 0 0 4px #fff7fa, 0 2px 8px #b7e3b0;
  transition: background 0.2s, transform 0.1s;
}

.end-message .end-actions button:hover {
  background: #b7e3b0;
  transform: translateY(-2px) scale(1.04);
}

.end-message .end-actions button:active {
  background: #c2d0c0;
  transform: translateY(2px) scale(0.98);
}

.end-message .end-actions button svg,
.end-message .end-actions button img {
  width: 28px;
  height: 28px;
  display: block;
}